<?xml version="1.0"?>
<ruleset name="Yoast" namespace="YoastCS\Yoast">
	<description>Yoast Coding Standards</description>

	<!-- ##### WordPress sniffs #####-->
	<rule ref="WordPress">
		<exclude name="Squiz.WhiteSpace.SuperfluousWhitespace.EmptyLines"/>

		<!-- No need for this sniff as every Yoast travis script includes linting all files. -->
		<exclude name="Generic.PHP.Syntax"/>

		<!-- Some calls just too quirky and complicated for this. -->
		<exclude name="PEAR.Functions.FunctionCallSignature.Indent"/>

		<!-- Demanding Yoda conditions is stupid. -->
		<exclude name="WordPress.PHP.YodaConditions"/>

	</rule>

	<rule ref="WordPress.Arrays.MultipleStatementAlignment">
		<properties>
			<!-- No need to adjust alignment of large arrays when the item with the largest key is removed. -->
			<property name="exact" value="false"/>
			<!-- Don't align multi-line items if ALL items in the array are multi-line. -->
			<property name="alignMultilineItems" value="!=100"/>
			<!-- Array Assignment operator should always be on the same line as the array key. -->
			<property name="ignoreNewlines" value="false"/>
		</properties>
	</rule>

	<!-- ##### Sniffs for PHP cross-version compatibility ##### -->
	<config name="testVersion" value="5.2-99.0"/>
	<rule ref="PHPCompatibility"/>

	<rule ref="Squiz.ControlStructures">
		<!-- Prevent errors for Spaces after closing braces, as we want a newline -->
		<exclude name="Squiz.ControlStructures.ControlSignature.SpaceAfterCloseBrace"/>
		<!-- elseif is fine by WP -->
		<exclude name="Squiz.ControlStructures.ElseIfDeclaration"/>
		<!-- WP got nothing about switch -->
		<exclude name="Squiz.ControlStructures.SwitchDeclaration"/>
	</rule>

	<!-- ##### Some miscellanous other sniffs ##### -->
	<!-- Added for lowercase keywords check -->
	<rule ref="Squiz.ControlStructures.ForEachLoopDeclaration">
		<properties>
			<property name="requiredSpacesAfterOpen" value="1"/>
			<property name="requiredSpacesBeforeClose" value="1"/>
		</properties>
	</rule>

	<rule ref="Squiz.ControlStructures.ForLoopDeclaration">
		<properties>
			<property name="requiredSpacesAfterOpen" value="1"/>
			<property name="requiredSpacesBeforeClose" value="1"/>
		</properties>
	</rule>

	<!-- Error prevention: Make sure the condition in a inline if declaration is bracketed -->
	<rule ref="Squiz.ControlStructures.InlineIfDeclaration"/>

	<!-- Error prevention: Make sure arithmetics are bracketed -->
	<rule ref="Squiz.Formatting.OperatorBracket.MissingBrackets"/>

	<!-- ##### Documentation Sniffs vs empty index files ##### -->

	<!-- Exclude the 'empty' index files from some documentation checks -->
	<rule ref="Squiz.Commenting.FileComment">
		<exclude-pattern>*/index\.php</exclude-pattern>
	</rule>
	<rule ref="Squiz.Commenting.InlineComment.NoSpaceBefore">
		<exclude-pattern>*/index\.php</exclude-pattern>
	</rule>
</ruleset>
